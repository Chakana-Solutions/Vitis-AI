<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->

<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="03af8d57-0a04-47a6-8f10-322fa00d8fc7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
<!-- Google Tag Manager -->
<script type="text/plain" class="optanon-category-C0002">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5RHQV7');</script>
<!-- End Google Tag Manager -->
  <title>Quick Start Guide for Versal™ AI Edge VEK280 &mdash; Vitis™ AI 3.5 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Quick Start Guide for Versal V70" href="v70.html" />
    <link rel="prev" title="Host Installation Instructions" href="../install/install.html" /> 
</head>

<body class="wy-body-for-nav">

<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5RHQV7" height="0" width="0" style="display:none;visibility:hidden" class="optanon-category-C0002"></iframe></noscript>
<!-- End Google Tag Manager --> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="../../index.html" class="icon icon-home"> Vitis™ AI
            <img src="../../_static/xilinx-header-logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.5
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Setup and Install</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../reference/release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/system_requirements.html">System Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/install.html">Host Install Instructions</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quick Start Guide for VEK280</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#prerequisites">Prerequisites</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#host-requirements">Host Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#applicable-targets">Applicable Targets</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#quickstart">Quickstart</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#clone-the-vitis-ai-repository">Clone the Vitis AI Repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-docker">Install Docker</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pull-vitis-ai-docker">Pull Vitis AI Docker</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setup-the-host">Setup the Host</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setup-the-target">Setup the Target</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#prepare-the-target">Prepare the Target</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#run-the-vitis-ai-examples">Run the Vitis AI Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="#quantize-compile-deploy-a-model">Quantize, Compile, Deploy a Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#working-with-the-vitis-ai-library">Working with the Vitis AI Library</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="v70.html">Quick Start Guide for V70</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_target.html">Quick Start Guide for Custom Targets</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Workflow and Components</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../workflow.html">First Steps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow.html#supported-evaluation-targets">Supported Evaluation Targets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow-system-integration.html">What is a DPU?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow-system-integration.html#vitis-ai-dpu-ip-and-reference-designs">Vitis AI DPU IP and Reference Designs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow-system-integration.html#integrating-the-dpu">Integrating the DPU</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ref_design_docs/README_DPUCV2DX8G.html">VEK280 DPUCV2DX8G Reference Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow-model-zoo.html">Vitis AI Model Zoo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow-model-development.html">Developing a Model for Vitis AI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow-model-deployment.html">Deploying a Model with Vitis AI</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Runtime API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../doxygen/api/classlist.html">Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doxygen/api/filelist.html">File</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doxygen/api/namespacelist.html">Namespace</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Additional Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/release_documentation.html">Vitis AI User Guides &amp; IP Product Guides</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/Xilinx/Vitis-AI-Tutorials">Vitis AI Developer Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow-third-party.html">Third-party Inference Stack Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/version_compatibility.html">IP and Tools Compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/branching_tagging_strategy.html">Branching and Tagging Strategy</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources and Support</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/additional_resources.html">Technical Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/additional_resources.html#id1">Additional Resources</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Related AMD Solutions</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/Xilinx/DPU-PYNQ">DPU-PYNQ</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/finn/">FINN &amp; Brevitas</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/inference-server/">Inference Server</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/amd/UIF">Unified Inference Frontend</a></li>
<li class="toctree-l1"><a class="reference external" href="https://onnxruntime.ai/docs/execution-providers/community-maintained/Vitis-AI-ExecutionProvider.html">Vitis AI ONNX Runtime Execution Provider</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/VVAS/">Vitis Video Analytics SDK</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Vitis™ AI</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Quick Start Guide for Versal™ AI Edge VEK280</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/docs/quickstart/vek280.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="quick-start-guide-for-versal-trade-ai-edge-vek280">
<h1>Quick Start Guide for Versal™ AI Edge VEK280<a class="headerlink" href="#quick-start-guide-for-versal-trade-ai-edge-vek280" title="Permalink to this heading">¶</a></h1>
<p>The AMD <strong>DPUCV2DX</strong> for Versal™ AI Edge is a configurable computation engine dedicated to convolutional neural networks. It supports a highly optimized instruction set, enabling the deployment of most convolutional neural networks. The following instructions will help you to install the software and packages required to support VEK280.</p>
<section id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this heading">¶</a></h2>
<section id="host-requirements">
<h3>Host Requirements<a class="headerlink" href="#host-requirements" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Confirm that your development machine meets the minimum <a class="reference internal" href="../reference/system_requirements.html"><span class="doc">Host System Requirements</span></a>.</p></li>
<li><p>Confirm that you have at least <strong>100GB</strong> of free space in the target partition.</p></li>
</ul>
</section>
<section id="applicable-targets">
<h3>Applicable Targets<a class="headerlink" href="#applicable-targets" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>This quickstart is applicable to the <a class="reference external" href="https://www.xilinx.com/vek280">VEK280</a></p></li>
</ul>
</section>
</section>
<section id="quickstart">
<h2>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this heading">¶</a></h2>
<section id="clone-the-vitis-ai-repository">
<h3>Clone the Vitis AI Repository<a class="headerlink" href="#clone-the-vitis-ai-repository" title="Permalink to this heading">¶</a></h3>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/Xilinx/Vitis-AI
<span class="nb">cd</span> Vitis-AI
</pre></div>
</div>
</div></blockquote>
</section>
<section id="install-docker">
<h3>Install Docker<a class="headerlink" href="#install-docker" title="Permalink to this heading">¶</a></h3>
<p>Make sure that the Docker engine is installed according to the official Docker <a class="reference external" href="https://docs.docker.com/engine/install/">documentation</a>.</p>
<p>The Docker daemon always runs as the root user. Non-root users must be <a class="reference external" href="https://docs.docker.com/engine/install/linux-postinstall/">added</a> to the docker group. Do this now.</p>
<p>Perform a quick and simple test of your Docker installation by executing the following command.  This command will download a test image from Docker Hub and run it in a container. When the container runs successfully, it prints a “Hello World” message and exits.</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>docker run hello-world
</pre></div>
</div>
</div></blockquote>
<p>Finally, verify that the version of Docker that you have installed meets the minimum <a class="reference internal" href="../reference/system_requirements.html"><span class="doc">Host System Requirements</span></a> by running the following command</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>docker --version
</pre></div>
</div>
</div></blockquote>
</section>
<section id="pull-vitis-ai-docker">
<h3>Pull Vitis AI Docker<a class="headerlink" href="#pull-vitis-ai-docker" title="Permalink to this heading">¶</a></h3>
<p>For this quickstart tutorial we will simply use the CPU Docker.  It is generic, does not require the user to build the container, and has no specific GPU enablement requirements.  More advanced users can optionally skip this step and jump to the <a class="reference internal" href="../install/install.html"><span class="doc">Full Install Instructions</span></a> but we would recommend that new users start with this simpler first step.</p>
<p>Pull and start the latest Vitis AI Docker using the following commands:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>docker pull xilinx/vitis-ai-pytorch-cpu:latest
./docker_run.sh xilinx/vitis-ai-pytorch-cpu:latest
</pre></div>
</div>
</div></blockquote>
</section>
<section id="setup-the-host">
<h3>Setup the Host<a class="headerlink" href="#setup-the-host" title="Permalink to this heading">¶</a></h3>
<p>It will be useful to you later on to have the cross-compiler installed.  This will allow you to compiled MPSoC applications on your host machine inside Docker.  Run the following commands to install the cross-compilation environment:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> Vitis-AI/board_setup/mpsoc
./host_cross_compiler_setup.sh
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Perform these steps on your local host Linux operating system (not inside the docker container). By default, the cross compiler will be installed in <code class="docutils literal notranslate"><span class="pre">~/petalinux_sdk_2023.1</span></code>.  The ~/petalinux_sdk_2023.1 path is recommended for the installation. Regardless of the path you choose for the installation, make sure the path has read-write permissions.</p>
</div>
<p>When the installation is complete, follow the prompts and execute the following command:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> ~/petalinux_sdk_2023.1/environment-setup-cortexa72-cortexa53-xilinx-linux
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you close the current terminal, you must re-execute the above instructions in the new terminal interface.</p>
</div>
</div></blockquote>
<p>Cross compile the sample taking <code class="docutils literal notranslate"><span class="pre">resnet50</span></code> as an example:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> Vitis-AI/examples/vai_runtime/resnet50
bash –x build.sh
</pre></div>
</div>
</div></blockquote>
<p>If the compilation process does not report any error and the executable file resnet50 is generated, then the host environment is installed correctly.</p>
</section>
<section id="setup-the-target">
<h3>Setup the Target<a class="headerlink" href="#setup-the-target" title="Permalink to this heading">¶</a></h3>
<p>The Vitis AI Runtime packages, VART samples, Vitis-AI-Library samples, and models are built into the board image, enhancing the user experience. Therefore, the user need not install Vitis AI Runtime packages and model packages on the board separately.</p>
<section id="prepare-the-target">
<h4>Prepare the Target<a class="headerlink" href="#prepare-the-target" title="Permalink to this heading">¶</a></h4>
<ol class="arabic simple">
<li><p>Make the target / host connections as shown in the images below.  Plug in the power adapter, ethernet cable, and a DisplayPort monitor (optional) and connect the USB-UART interface to the host.</p></li>
</ol>
<a class="reference internal image-reference" href="docs/reference/images/VEK280_setup.png"><img alt="docs/reference/images/VEK280_setup.png" src="docs/reference/images/VEK280_setup.png" style="width: 1300px;" /></a>
<ol class="arabic simple" start="2">
<li><p>Download the SD card image from <a class="reference external" href="https://www.xilinx.com/member/forms/download/design-license-xef.html?filename=xilinx-vek280-dpu-v2023.1-v3.5.0.img.gz">here</a></p></li>
<li><p>Use BalenaEtcher to burn the image file onto the SD card.</p></li>
</ol>
<a class="reference internal image-reference" href="../../_images/Etcher.png"><img alt="../../_images/Etcher.png" src="../../_images/Etcher.png" style="width: 1300px;" /></a>
<ol class="arabic" start="4">
<li><p>Insert the imaged SD card into the target board.</p></li>
<li><p>Log in to the board with your terminal emulator of choice via SSH or with the Serial Parameters listed below.</p>
<blockquote>
<div><ul class="simple">
<li><p>Baud Rate: 115200</p></li>
<li><p>Data Bit: 8</p></li>
<li><p>Stop Bit: 1</p></li>
<li><p>No Parity</p></li>
</ul>
</div></blockquote>
</li>
<li><p>The IP address for the target can be found with the command below.</p></li>
</ol>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>Target<span class="o">]</span> <span class="nv">$ifconfig</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../../_images/ifconfig.png"><img alt="../../_images/ifconfig.png" src="../../_images/ifconfig.png" style="width: 1300px;" /></a>
<p>If you are using a point-to-point connection or DHCP is not available, you can manually set the IP address:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>Target<span class="o">]</span> <span class="nv">$ifconfig</span> eth0 <span class="o">[</span>target_ip_address<span class="o">]</span>
</pre></div>
</div>
<ol class="arabic simple" start="7">
<li><p>Next, connect to the board via SSH.  The password is ‘root’</p></li>
</ol>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>Host<span class="o">]</span> <span class="nv">$ssh</span> -X root@<span class="o">[</span>target_ip_address<span class="o">]</span>
</pre></div>
</div>
<ol class="arabic simple" start="8">
<li><p>If you have not connected a DisplayPort monitor, it is recommended that you export the display.  If you do not do so, the examples will not run as expected.</p></li>
</ol>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>Host<span class="o">]</span> <span class="nv">$export</span> <span class="nv">DISPLAY</span><span class="o">=</span>:0.0
</pre></div>
</div>
<ol class="arabic simple" start="9">
<li><p>Download the model.</p></li>
</ol>
<p>You can now select a model from the Vitis AI Model Zoo <a class="reference external" href="../workflow-model-zoo.html">Vitis AI Model Zoo</a>.  Navigate to the  <a class="reference external" href="https://github.com/Xilinx/Vitis-AI/tree/master/model_zoo/model-list">model-list subdirectory</a>  and select the model that you wish to test. For each model, a YAML file provides key details of the model. In the YAML file there are separate hyperlinks to download the model for each supported target.  Choose the correct link for your target platform and download the model.</p>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>Take the VEK280 ResNet50 model as an example.</p></li>
</ol>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /workspace
wget https://www.xilinx.com/bin/public/openDownload?filename<span class="o">=</span>resnet50_pruned_0_6_pt-vek280-r3.5.0.tar.gz -O resnet50_pruned_0_6_pt-vek280-r3.5.0.tar.gz
</pre></div>
</div>
<ol class="loweralpha simple" start="2">
<li><p>Copy the downloaded file to the board using scp with the following command:</p></li>
</ol>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>scp resnet50_pruned_0_6_pt-vek280-r3.5.0.tar.gz root@IP_OF_BOARD:~/
</pre></div>
</div>
<ol class="loweralpha simple" start="3">
<li><p>Log in to the board (via ssh or serial port) and install the model package:</p></li>
</ol>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>tar -xzvf resnet50_pruned_0_6_pt-vek280-r3.5.0.tar.gz
cp resnet50 /usr/share/vitis_ai_library/models -r
</pre></div>
</div>
</div></blockquote>
</section>
</section>
<section id="run-the-vitis-ai-examples">
<h3>Run the Vitis AI Examples<a class="headerlink" href="#run-the-vitis-ai-examples" title="Permalink to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p>Download the <a class="reference external" href="https://www.xilinx.com/bin/public/openDownload?filename=vitis_ai_runtime_r3.5.0_image_video.tar.gz">vitis_ai_runtime_r3.5.0_image_video.tar.gz</a> from host to the target using scp with the following command:</p></li>
</ol>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>Host<span class="o">]</span><span class="nv">$scp</span> vitis_ai_runtime_r3.5.*_image_video.tar.gz root@<span class="o">[</span>IP_OF_BOARD<span class="o">]</span>:~/
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Unzip the <code class="docutils literal notranslate"><span class="pre">vitis_ai_runtime_r3.5.0_image_video.tar.gz</span></code> package on the target.</p></li>
</ol>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~
tar -xzvf vitis_ai_runtime_r*3.5._image_video.tar.gz -C Vitis-AI/examples/vai_runtime
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Navigate to the example directory on the target board. Take <code class="docutils literal notranslate"><span class="pre">resnet50</span></code> as an example.</p></li>
</ol>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~/Vitis-AI/examples/vai_runtime/resnet50
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Run the example.</p></li>
</ol>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>./resnet50 /usr/share/vitis_ai_library/models/resnet50/resnet50.xmodel
</pre></div>
</div>
<p>For examples with video input, only <code class="docutils literal notranslate"><span class="pre">webm</span></code> and <code class="docutils literal notranslate"><span class="pre">raw</span></code> format are supported by default with the official system image. If you want to support video data in other formats, you need to install the relevant packages on the system.</p>
</section>
<section id="quantize-compile-deploy-a-model">
<h3>Quantize, Compile, Deploy a Model<a class="headerlink" href="#quantize-compile-deploy-a-model" title="Permalink to this heading">¶</a></h3>
<p><em>Oops….the below is written for TF1.1 but needs to be updated to PyTorch so that it aligns with pulling the pre-built PyTorch CPU container as done above.  Aidan, can you build this out further?</em></p>
<p>This tutorial assumes that Vitis AI has been installed and that the MPSoC target has been configured, as explained in the installation instructions above.</p>
<ol class="arabic">
<li><p>Download the calibration images (the full dataset is from <a class="reference external" href="http://image-net.org/download-images">ImageNet</a>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>wget https://www.xilinx.com/bin/public/openDownload?filename=Imagenet_calib.tar.gz -O Imagenet_calib.tar.gz
tar -xzvf Imagenet_calib.tar.gz -C tf_resnetv1_50_imagenet_224_224_6.97G_3.0/data
</pre></div>
</div>
</li>
<li><p>Download the sample images used by the example application:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cd /workspace/examples
wget https://www.xilinx.com/bin/public/openDownload?filename=vitis_ai_runtime_r3.0.0_image_video.tar.gz -O vitis_ai_runtime_r3.0.0_image_video.tar.gz
tar -xzvf vitis_ai_runtime_r3.0.0_image_video.tar.gz -C vai_runtime
</pre></div>
</div>
</li>
<li><p>Activate the Conda “vitis-ai-tensorflow” environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">activate</span> <span class="n">vitis</span><span class="o">-</span><span class="n">ai</span><span class="o">-</span><span class="n">tensorflow</span>
</pre></div>
</div>
</li>
<li><p>Configure the quantization process: edit the <code class="docutils literal notranslate"><span class="pre">/workspace/tf_resnetv1_50_imagenet_224_224_6.97G_3.0/code/quantize/config.ini</span></code> file and set the <code class="docutils literal notranslate"><span class="pre">CALIB_BATCH_SIZE</span></code> option to <code class="docutils literal notranslate"><span class="pre">5</span></code>.</p></li>
<li><p>Quantize the floating-point model:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">workspace</span><span class="o">/</span><span class="n">tf_resnetv1_50_imagenet_224_224_6</span><span class="mf">.97</span><span class="n">G_3</span><span class="mf">.0</span><span class="o">/</span><span class="n">code</span><span class="o">/</span><span class="n">quantize</span>
<span class="n">bash</span> <span class="n">quantize</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
</li>
<li><p>Compile the quantized model:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">workspace</span><span class="o">/</span><span class="n">tf_resnetv1_50_imagenet_224_224_6</span><span class="mf">.97</span><span class="n">G_3</span><span class="mf">.0</span>
<span class="n">vai_c_tensorflow</span> <span class="o">-</span><span class="n">f</span> <span class="o">./</span><span class="n">quantized</span><span class="o">/</span><span class="n">quantize_eval_model</span><span class="o">.</span><span class="n">pb</span> <span class="o">-</span><span class="n">a</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">vitis_ai</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">arch</span><span class="o">/</span><span class="n">DPUCVDX8H</span><span class="o">/</span><span class="n">VCK50008PE</span><span class="o">/</span><span class="n">arch</span><span class="o">.</span><span class="n">json</span> <span class="o">-</span><span class="n">o</span> <span class="o">./</span><span class="n">compiled</span> <span class="o">-</span><span class="n">n</span> <span class="n">resnet50_tf</span>
</pre></div>
</div>
</li>
<li><p>Cross-compile the example application (<em>details to be added</em>)
Note: the example is already pre-compiled in the standard board image, but I feel it is important to show the cross-compilation steps as this is something people will have to do routinely.</p></li>
<li><p>Transfer compiled example to MPSoC board (<em>details to be added</em>)</p></li>
<li><p>Execute example (<em>details to be added</em>)</p></li>
</ol>
</section>
<section id="working-with-the-vitis-ai-library">
<h3>Working with the Vitis AI Library<a class="headerlink" href="#working-with-the-vitis-ai-library" title="Permalink to this heading">¶</a></h3>
<p>The Vitis AI runtime packages, and Vitis AI Library samples and models are compiled into the pre-built Vitis AI board images. You can run the examples directly. If you have a new program, compile it on the host side and copy the executable program to the target.</p>
<ol class="arabic">
<li><p>Copy vitis_ai_library_r3.5.0_images.tar.gz and vitis_ai_library_r3.5.0_video.tar.gz from host to the target using the scp command as shown below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[Host]$scp vitis_ai_library_r3.0.0_images.tar.gz root@IP_OF_BOARD:~/
[Host]$scp vitis_ai_library_r3.0.0_video.tar.gz root@IP_OF_BOARD:~/
</pre></div>
</div>
</li>
<li><p>Untar the image and video packages on the target:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~</span>
<span class="n">tar</span> <span class="o">-</span><span class="n">xzvf</span> <span class="n">vitis_ai_library_r3</span><span class="mf">.0</span><span class="o">*</span><span class="n">_images</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span> <span class="o">-</span><span class="n">C</span> <span class="n">Vitis</span><span class="o">-</span><span class="n">AI</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">vai_library</span>
<span class="n">tar</span> <span class="o">-</span><span class="n">xzvf</span> <span class="n">vitis_ai_library_r3</span><span class="mf">.0</span><span class="o">*</span><span class="n">_video</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span> <span class="o">-</span><span class="n">C</span> <span class="n">Vitis</span><span class="o">-</span><span class="n">AI</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">vai_library</span>
</pre></div>
</div>
</li>
<li><p>Enter the extracted directory of the example on the target board and then compile the example. Take classification as an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">Vitis</span><span class="o">-</span><span class="n">AI</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">vai_library</span><span class="o">/</span><span class="n">samples</span><span class="o">/</span><span class="n">classification</span>
</pre></div>
</div>
</li>
<li><p>Run the example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">test_jpeg_classification</span> <span class="n">resnet50_pt</span> <span class="n">sample_classification</span><span class="o">.</span><span class="n">jpg</span>
</pre></div>
</div>
</li>
</ol>
<p>Note: The application supports batch mode. If the DPU batch number is &gt; than 1, you can also run the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">test_jpeg_classification</span> <span class="n">resnet50_pt</span> <span class="o">&lt;</span><span class="n">img1_url</span><span class="o">&gt;</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">img2_url</span><span class="o">&gt;</span> <span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<ol class="arabic" start="5">
<li><p>There are two ways to view the results. One is to view the results by printing the output predictions. The other way is to view the images by downloading the 0_sample_classification_result.jpg image.</p></li>
<li><p>To run the video example, run the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">test_video_classification</span> <span class="n">resnet50_pt</span> <span class="n">video_input</span><span class="o">.</span><span class="n">webm</span> <span class="o">-</span><span class="n">t</span> <span class="mi">8</span>
</pre></div>
</div>
</li>
</ol>
<p>where, video_input.webm is the name of the video file for input and -t is the number of threads. You must prepare the video file yourself.</p>
<p>Note:
• Pre-built Vitis AI board images only support video file input in the webm or raw format. If you want
to use a video file in a format that is not natively supported, you have to install the relevant
packages, such as the ffmpeg package, on the target.
• When a display is used as a sink for the post-processed video, the performance will be limited to
the maximum frame rate supported by the display interface on the target. This might not reflect the
maximum performance, a fact that particularly important when you have enabled multi-threading
to benchmark maximum frame rates. However, you can test the maximum inference performance
of the Vitis AI Libraries by issuing the following command:
env DISPLAY=:0.0 DEBUG_DEMO=1 ./test_video_classification resnet50_pt ‘multifilesrc location=~/video_input.webm ! decodebin ! videoconvert ! appsink sync=false’ -t 2
7. To test the program with a USB camera as input, run the following command:
./test_video_classification resnet50_pt 0 -t 4
Here, 0 is the first USB camera device node. If you have multiple USB cameras, the value is
1,2,3, etc., where, -t is the number of threads.</p>
<p>IMPORTANT! Enable X11 forwarding with the following command (suppose in this example that the
host machine IP address is 192.168.0.10) when logging in to the board using an SSH terminal because
the test_video examples require a Linux windows subsystem target to work properly.
export DISPLAY=192.168.0.10:0.0
8. To test the performance of the model, run the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">test_performance_classification</span> <span class="n">resnet50_pt</span>
<span class="n">test_performance_classification</span><span class="o">.</span><span class="n">list</span> <span class="o">-</span><span class="n">t</span> <span class="mi">8</span> <span class="o">-</span><span class="n">s</span> <span class="mi">60</span>
<span class="n">Here</span><span class="p">,</span> <span class="o">-</span><span class="n">t</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">number</span> <span class="n">of</span> <span class="n">threads</span> <span class="ow">and</span> <span class="o">-</span><span class="n">s</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">number</span> <span class="n">of</span> <span class="n">seconds</span><span class="o">.</span>
</pre></div>
</div>
<p>To view a complete listing of command line options for the executable, run the command
with the ‘-h’ switch.</p>
</section>
</section>
</section>


           </div>
          </div>
          
				  
				  <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../install/install.html" class="btn btn-neutral float-left" title="Host Installation Instructions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="v70.html" class="btn btn-neutral float-right" title="Quick Start Guide for Versal V70" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022-2023, Advanced Micro Devices, Inc.
      <span class="lastupdated">Last updated on June 29, 2023.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>